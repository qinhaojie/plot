webpackJsonp([1],[function(t,e,r){t.exports=r(13)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n={distance:function(t,e){var n=r(t,2),o=n[0],i=n[1],a=r(e,2),s=a[0],u=a[1];return Math.sqrt(Math.pow(o-s,2)+Math.pow(i-u,2))},approximate:function(t,e){e=e?e:2;var r=Math.pow(10,e);return Math.ceil(t*r)/r},uniqueId:function(){var t=(new Date).getTime();return function(){return t++}}(),vectorAngle:function(t,e){return Math.acos((t[0]*e[0]+t[1]*e[1])/(n.distance([0,0],t)*n.distance([0,0],e)))}};e.default=n},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(3),f=(n(c),r(1)),h=n(f),p=r(9),y=n(p),d="shape",v=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));n.setMaxListeners(0),n.isDrew=!1,n.id=r.id?r.id:"shape-"+h.default.uniqueId();var a=n.chart;n.scaleX=a.scaleX,n.scaleY=a.scaleY,n.graph=a.graph,n.width=a.layout.w,n.height=a.layout.h,n.relations=[];var s=n;return n.drawCall=function(){return s.draw()},a.on("draw",n.drawCall),n}return a(e,t),u(e,[{key:"addShape",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addShape",this).call(this,t)}},{key:"end",value:function(){console.log("end"),this.bindEvent(),this.draw(),this.manager.endCurrentElement()}},{key:"draw",value:function(){this.isDrew=!0,this.emit("draw")}},{key:"isContact",value:function(t){return this.isHover}},{key:"focus",value:function(){this.group.classed(this.activeClassName,!0)}},{key:"blur",value:function(){this.group.classed(this.activeClassName,!1)}},{key:"buildDom",value:function(){this.group=this.graph.append("g").attr("id",this.id).attr("class",d);var t=this;this.group.on("mouseover",function(){t.isHover=!0}).on("mouseout",function(){t.isHover=!1})}},{key:"pxToUnit",value:function(t){var e=s(t,2),r=e[0],n=e[1],o=this.scaleX(1)-this.scaleX(0),i=this.scaleY(1)-this.scaleY(0);return[r/o,n/i]}},{key:"addRelation",value:function(t){this.relations.push(t)}},{key:"removeRelation",value:function(t){var e=this.relations.indexOf(t);e>-1&&this.relations.splice(e,1)}},{key:"destroy",value:function(){this.group.remove(),this.relations.forEach(function(t){t.destroy()}),this.relations=[],this.chart.removeListener("draw",this.drawCall),this.chart.removeShapeRef(this)}},{key:"bindEvent",value:function(){}},{key:"proxyClassName",get:function(){return"proxy"}},{key:"activeClassName",get:function(){return"active"}},{key:"proxyPathWidth",get:function(){return 8}}]),e}(y.default);e.default=v},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,o,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(r=this._events[t],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),l=r.slice(),o=l.length,u=0;u<o;u++)l[u].apply(this,s);return!0},r.prototype.addListener=function(t,e){var o;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),o||(o=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var o=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,o,a,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],a=r.length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(2),f=n(c),h=r(1),p=(n(h),r(6)),y=(n(p),r(7)),d=(n(y),function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.data,a=void 0===n?[]:n,s=r.color,u=void 0===s?"none":s,l=r.r,c=void 0===l?3:l,f=r.stroke,h=void 0===f?"#666":f,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e);var y=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));y.points=[];var d=!0,v=!1,b=void 0;try{for(var m,g=a[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var _=m.value;_.coordinate||(_=t.addByConfig("point",{data:_})),y.points.push(_)}}catch(t){v=!0,b=t}finally{try{!d&&g.return&&g.return()}finally{if(v)throw b}}return y.color=u,y.r=c,y.stroke=h,y.name="line",y.shapes={point:[]},y.necessaryShape={point:1/0},y.shapeNames=Object.keys(y.shapes),y.buildDom(),p&&y.draw(),y}return a(e,t),u(e,[{key:"buildDom",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildDom",this).call(this)}},{key:"draw",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this)}},{key:"getData",value:function(){var t=this.getPoints(),e="M",r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=s(i.value,2),l=u[0],c=u[1];e=e+l+" "+c+" "}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}},{key:"getPoints",value:function(){return this.points.map(function(t){return t.getData()})}},{key:"move",value:function(t){var e=s(t,2),r=e[0],n=e[1],o=!0,i=!1,a=void 0;try{for(var u,l=this.points[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.move([r,n])}}catch(t){i=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}}},{key:"moveEnd",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.points[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;i.moveEnd()}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}}},{key:"addShape",value:function(t){return!(!this.shapeInNecessary(t)||this.shapeInAdded(t))&&(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addShape",this).call(this,t),this.points.push(t),void this.checkEnd())}},{key:"bindEvent",value:function(){var t=this;this.points.forEach(function(e){e.on("move",function(){this.draw(),this.emit("move")}.bind(t))})}},{key:"end",value:function(){var t=0,r=!0,n=!1,o=void 0;try{for(var i,a=this.points[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;if(t>0){this.manager.addByConfig("segment",{data:[this.points[t-1],s]})}t++}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"end",this).call(this)}}]),e}(f.default));e.default=d},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},f=r(2),h=n(f),p=r(1),y=n(p),d="circle shape-point",v=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.data,o=void 0===n?[]:n,s=r.color,u=void 0===s?"#ccc":s,l=r.r,c=void 0===l?6:l,f=r.stroke,h=void 0===f?"#666":f,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e);var y=a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return y.coordinate=o,y.lastCoordinate=[o[0],o[1]],y.color=u,y.r=c,y.stroke=h,y.shapes={point:[]},y.necessaryShape={point:1},y.buildDom(),y.name="point",y.shapeNames=[],p&&y.draw(),y}return s(e,t),l(e,[{key:"draw",value:function(){var t=this.getData(this.coordinate),r=u(t,2),n=r[0],o=r[1];this.group.attr("transform","translate("+n+","+o+")"),this.tip.text(y.default.approximate(this.coordinate[0])+","+y.default.approximate(this.coordinate[1])),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this)}},{key:"getData",value:function(t){t||(t=this.coordinate);var e=this.scaleX,r=this.scaleY;return[e(t[0]),r(t[1])]}},{key:"buildDom",value:function(){this.dom||(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildDom",this).call(this),this.dom=this.group.append("circle").attr("class",d).attr("fill",this.color).attr("stroke",this.stroke).attr("r",this.r).attr("cx",0).attr("cy",0),this.tip=this.group.append("text").attr("dx",3).attr("dy",-3).style("pointer-events","none"),this.proxyDom=this.group.append("circle").attr("class",this.proxyClassName).attr("r",this.r+5).attr("fill","rgba(0,0,0,0)").attr("stroke","rgba(0,0,0,0)"))}},{key:"focus",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"focus",this).call(this),this.dom.attr("fill","red")}},{key:"blur",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"blur",this).call(this),this.dom.attr("fill",this.color)}},{key:"move",value:function(t){var r=u(t,2),n=r[0],o=r[1],i=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pxToUnit",this).call(this,[n,o]),a=u(i,2);n=a[0],o=a[1],this.coordinate[0]=this.lastCoordinate[0]+n,this.coordinate[1]=this.lastCoordinate[1]+o,this.draw(),this.emit("move")}},{key:"moveEnd",value:function(){this.lastCoordinate[0]=this.coordinate[0],this.lastCoordinate[1]=this.coordinate[1],this.emit("moveend")}},{key:"addShape",value:function(t){this.coordinate=[].concat(o(t.coordinate)),this.lastCoordinate=[].concat(o(t.coordinate)),this.shapes.point.push(t),this.checkEnd()}},{key:"end",value:function(){this.shapes.point[0].destroy(),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"end",this).call(this)}}]),e}(h.default);e.default=v},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(2),f=n(c),h=r(1),p=(n(h),r(6)),y=(n(p),"line shape-segment"),d=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.data,a=void 0===n?[]:n,s=r.color,u=void 0===s?"none":s,l=r.r,c=void 0===l?3:l,f=r.stroke,h=void 0===f?"#666":f,p=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e);var y=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));y.points=[];var d=!0,v=!1,b=void 0;try{for(var m,g=a[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var _=m.value;_.coordinate||(_=t.addByConfig("point",{data:_})),y.points.push(_)}}catch(t){v=!0,b=t}finally{try{!d&&g.return&&g.return()}finally{if(v)throw b}}return y.color=u,y.r=c,y.stroke=h,y.shapes={point:[]},y.necessaryShape={point:2},y.shapeNames=Object.keys(y.shapes),y.buildDom(),y.name="segment",p&&(y.draw(),y.bindEvent()),y}return a(e,t),u(e,[{key:"draw",value:function(){var t=this.getData();this.dom.attr("d",t),this.proxyDom.attr("d",t),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this)}},{key:"getData",value:function(){var t=this.getPoints(),e="M",r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=s(i.value,2),l=u[0],c=u[1];e=e+l+" "+c+" "}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}},{key:"getPoints",value:function(){return this.points.map(function(t){return t.getData()})}},{key:"bindEvent",value:function(){var t=this;this.points.forEach(function(e){e.on("move",function(){this.draw(),this.emit("move")}.bind(t))})}},{key:"buildDom",value:function(){if(!this.dom){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildDom",this).call(this);var t=document.getElementById(this.id),r=this.points[0];if(r){var n=document.getElementById(r.id);n.parentElement.insertBefore(t,n)}this.dom=this.group.append("path").attr("class",y).style("fill",this.color).attr("stroke",this.stroke),this.tip=this.group.append("text").attr("dx",3).attr("dy",-3),this.proxyDom=this.group.append("path").attr("class",this.proxyClassName).attr("stroke-width",this.proxyPathWidth).attr("fill","none").attr("stroke","rgba(0,0,0,0)")}}},{key:"move",value:function(t){var e=s(t,2),r=e[0],n=e[1],o=!0,i=!1,a=void 0;try{for(var u,l=this.points[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;c.move([r,n])}}catch(t){i=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}}},{key:"moveEnd",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.points[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;i.moveEnd()}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}}},{key:"addShape",value:function(t){return!(!this.shapeInNecessary(t)||this.shapeInAdded(t))&&(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addShape",this).call(this,t),this.points.push(t),void this.checkEnd())}},{key:"k",get:function(){var t=this.getPoints(),e=s(t,2),r=e[0],n=e[1];return(r[1]-n[1])/(r[0]-n[0])}}]),e}(f.default);e.default=d},,function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(3),l=n(u),c=function(t){function e(t){o(this,e);var r=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return r.manager=t,r.chart=t.chart,r.container=r.chart.graph,r.domin={x:[0,t.chart.layout.w],y:[0,t.chart.layout.h]},r}return a(e,t),s(e,[{key:"shapeInAdded",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,i=this.shapeNames[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(this.shapes[a].includes(t))return!0}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return!1}},{key:"shapeInNecessary",value:function(t){var e=t.name,r=this.getFullName(e);return this.shapeNames.includes(r)&&this.shapes[r].length<this.necessaryShape[r]}},{key:"getFullName",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,i=this.shapeNames[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value,s=a.split("_");if(s.includes(t))return a}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return""}},{key:"addShape",value:function(t){return!(!this.shapeInNecessary(t)||this.shapeInAdded(t))&&void this.shapes[this.getFullName(t.name)].push(t)}},{key:"checkEnd",value:function(){var t=!0,e=!1,r=void 0;try{for(var n,o=this.shapeNames[Symbol.iterator]();!(t=(n=o.next()).done);t=!0){var i=n.value;if(this.shapes[i].length<this.necessaryShape[i])return!1}}catch(t){e=!0,r=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw r}}this.end()}},{key:"end",value:function(){throw new Error("end 未定义")}}]),e}(l.default);e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=r(14),c=n(l),f=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.shapes={point:[],straight_segment:[]},t.necessaryShape={point:1,straight_segment:1},t.shapeNames=Object.keys(t.shapes),t}return a(e,t),s(e,[{key:"draw",value:function(){this.dom.attr("d",this.getData())}},{key:"buildDom",value:function(){this.dom||(u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildDom",this).call(this),this.dom=this.group.append("path").classed("vertical-line",!0))}},{key:"getData",value:function(){var t=this.shapes.point[0].getData(),e=this.shapes.straight_segment[0],r=-1/e.k,n=function(e){return r*e+t[1]-r*t[0]},o="M";return r!==1/0?this.domin.x.forEach(function(t){o+=t+" "+n(t)+" "}):o="M "+t[0]+" 0 "+t[0]+" "+this.domin.y[1],o}},{key:"name",get:function(){return"verticalLine"}}]),e}(c.default);e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.straight=e.segment=e.angle=e.polygon=e.line=e.point=e.func=void 0;var o=r(18),i=n(o),a=r(6),s=n(a),u=r(5),l=n(u),c=r(19),f=n(c),h=r(17),p=n(h),y=r(7),d=n(y),v=r(20),b=n(v);e.func=i.default,e.point=s.default,e.line=l.default,e.polygon=f.default,e.angle=p.default,e.segment=d.default,e.straight=b.default},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function(){function t(e,n){r(this,t),this.chart=e,this.types=n,this.elements={},this.start=!1,this.bindEvent()}return n(t,[{key:"bindEvent",value:function(){var t=this;this.chart.on("hover",function(e){t.start&&t.currentElement.shapeInNecessary(e)&&!t.currentElement.shapeInAdded(e)&&e.focus()}),this.chart.on("hoverout",function(e){t.start&&(t.currentElement.shapeInAdded(e)||e.blur())})}},{key:"addElement",value:function(t){var e=t.name;this.elements[e]||(this.elements[e]=[]),this.elements[e].push(t)}},{key:"startElement",value:function(t){this.start=!0,this.currentElement=new this.types[t](this)}},{key:"stopElement",value:function(){this.start=!1,this.currentElement&&this.currentElement.destroy(),this.currentElement=null}},{key:"endCurrentElement",value:function(){this.addElement(this.currentElement),this.currentElement=new this.types[this.typeName](this),this.chart.blurAll()}},{key:"removeElement",value:function(t){t.destroy()}},{key:"removeElementRef",value:function(t){var e=t.name,r=this.elements[e].indexOf(t);r>-1&&this.elements[e].splice(r,1)}}]),t}();e.default=o},function(t,e,r){(function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}var n=r(21),o=e(n),i=new o.default({container:document.getElementById("app"),xAxes:{domain:[-20.5,20.5]},yAxes:{domain:[-2,2]},content:{}});i.draw();var a='\n    <div id="box">\n    选择模式\n    <select name="a" id="limit">\n        <option value="move">移动与缩放</option>\n        <option value="relation.verticalLine">垂线</option>\n        <option value="relation.parallelLine">平行线</option>\n        <option value="addElement.point">点</option>\n        <option value="addElement.segment">线段</option>\n        <option value="addElement.straight">直线</option>\n        <option value="addElement.angle">角度</option>\n        <option value="addElement.polygon">多边形</option>\n    </select>\n</div>\n';t("body").append(a),t("#limit").on("change",function(){i.setMode(this.value)})}).call(e,r(8))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=r(9),c=n(l),f=function(t){function e(t){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"addShape",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addShape",this).call(this,t)!==!1&&(t.addRelation(this),this.checkEnd())}},{key:"end",value:function(){console.log("end"),this.isEnd=!0,this.buildDom(),this.bindEvent(),this.draw(),this.manager.endCurrentElement()}},{key:"draw",value:function(){console.log("drew")}},{key:"buildDom",value:function(){this.group=this.container.insert("g","g:nth-child(2)").attr("class","relation")}},{key:"bindEvent",value:function(){var t=this,e=this;this.drawCall=function(){return e.draw.apply(e,arguments)};var r=!0,n=!1,o=void 0;try{for(var i,a=this.shapeNames[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value;this.shapes[s].forEach(function(e){e.on("draw",t.drawCall)})}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}}},{key:"destroy",value:function(){var t=this;if(this.isEnd){this.group.remove();var e=!0,r=!1,n=void 0;try{for(var o,i=this.shapeNames[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;this.shapes[a].forEach(function(e){e.removeListener("draw",t.drawCall),e.removeRelation(t)})}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}this.manager.removeElementRef(this),this.shapes=null}}}]),e}(c.default);e.default=f},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.parallelLine=e.verticalLine=void 0;var o=r(10),i=n(o),a=r(16),s=n(a);e.verticalLine=i.default,e.parallelLine=s.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(10),l=n(u),c=function(t){function e(){return o(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"getData",value:function(){var t=this.shapes.point[0].getData(),e=this.shapes.straight_segment[0],r=e.k,n=function(e){return r*e+t[1]-r*t[0]},o="M";return r!==1/0?this.domin.x.forEach(function(t){o+=t+" "+n(t)+" "}):o="M "+t[0]+" 0 "+t[0]+" "+this.domin.y[1],o}},{key:"name",get:function(){return"parallelLine"}}]),e}(l.default);e.default=c},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(5),f=n(c),h=r(1),p=n(h),y=function(t){function e(t,r){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return n.name="angle",n.necessaryShape={point:3},n}return a(e,t),u(e,[{key:"getData",value:function(){var t=this.getPoints(),e="M",r=!0,n=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var u=s(i.value,2),l=u[0],c=u[1];e=e+l+" "+c+" "}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e}},{key:"buildDom",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildDom",this).call(this),this.tip=this.group.append("g").style("pointer-events","none"),this.angleArc=this.tip.append("path").attr("id","text"+this.id).attr("stroke","#000"),this.angleText=this.tip.append("text").attr("text-anchor","middle").append("textPath").attr("xlink:href","#text"+this.id).attr("startOffset","50%")}},{key:"draw",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this);var t=this.points[1].getData(),r=s(t,2),n=r[0],o=r[1],i=this.getAngleValue(),a=this.getPointOverVectorByLength(this.vectorA),u=this.getPointOverVectorByLength(this.vectorB);this.tip.attr("transform","translate("+n+","+o+")"),this.angleArc.attr("d",function(){return"M"+a[0]+" "+a[1]+","+u[0]+" "+u[1]}),this.angleText.text(p.default.approximate(180*i/Math.PI))}},{key:"getAngleValue",value:function(){var t=this.getPoints(),e=s(t,3),r=e[0],n=e[1],o=e[2],i=[r[0]-n[0],r[1]-n[1]],a=[o[0]-n[0],o[1]-n[1]],u=p.default.vectorAngle(i,a);return this.vectorA=i,this.vectorB=a,u}},{key:"getPointOverVectorByLength",value:function(t,e){e=e?e:35;var r=Math.atan2(t[1],t[0]);return[Math.cos(r)*e,Math.sin(r)*e]}}]),e}(f.default);e.default=y},function(t,e,r){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(2),f=n(c),h="line shape-func",p=function(e){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.data,a=void 0===n?function(){}:n,s=e.color,u=void 0===s?"#000":s;o(this,r);var l=i(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments));return l.fun=a,l.color=u,l.buildDom(),l.dx=0,l.dy=0,l.lastdx=0,l.lastdy=0,l.name="func",l}return a(r,e),u(r,[{key:"draw",value:function(){var t=this.getData(),e=this.genarator(t);this.dom.attr("d",e),this.proxyDom.attr("d",e),l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"draw",this).call(this)}},{key:"getData",value:function(){var e=this.width,r=this,n=this.scaleX,o=t.range(e).map(function(t){return r.fun(n.invert(t)-r.dx-r.lastdx)+r.dy+r.lastdy});return o}},{key:"genarator",value:function(t){var e="",r=1,n=this.scaleX,o=this.scaleY;return t.forEach(function(i,a){if(isFinite(i)){e||(e="M"+a+" "+o(i));var s=i-t[a-1],u=n.invert(a)-n.invert(a-1),l=s/u;e+=l/r<0&&(Math.abs(l)>1e3||Math.abs(r)>1e3)?"M "+a+" "+o(i):"L "+a+" "+o(i),r=l}}),e}},{key:"buildDom",value:function(){this.dom||(l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"buildDom",this).call(this),this.dom=this.group.append("path").attr("class",h),this.proxyDom=this.group.append("path").attr("class",this.proxyClassName).attr("stroke-width",this.proxyPathWidth).attr("fill","none").attr("stroke","rgba(0,0,0,0)"))}},{key:"move",value:function(t){var e=s(t,2),n=e[0],o=e[1],i=l(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"pxToUnit",this).call(this,[n,o]),a=s(i,2);this.dx=a[0],this.dy=a[1],this.draw()}},{key:"moveEnd",value:function(){this.lastdx+=this.dx,this.lastdy+=this.dy;var t=[0,0];this.dx=t[0],this.dy=t[1]}}]),r}(f.default);e.default=p}).call(e,r(4))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=r(5),c=n(l),f=r(1),h=(n(f),function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),r.color="#ccc";var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return n.name="polygon",n}return a(e,t),s(e,[{key:"checkEnd",value:function(){if(!(this.points.length<4)){var t=this.points.length-1;this.points[0]===this.points[t]&&this.end()}}},{key:"shapeInAdded",value:function(t){return this.points.length<3?u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"shapeInAdded",this).call(this,t):t!==this.points[0]&&u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"shapeInAdded",this).call(this,t)}}]),e}(c.default));e.default=h},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=r(7),c=n(l),f=r(1),h=(n(f),function(t){function e(t,r){o(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return n.name="straight",n}return a(e,t),u(e,[{key:"getData",value:function(){var t=this.getPoints(),e=s(t,2),r=e[0],n=e[1],o=this.chart.layout.w,i=(r[1]-n[1])/(r[0]-n[0]),a=function(t){return i*t+r[1]-i*r[0]},u=[[0,a(0)],[o,a(o)]],l="M",c=!0,f=!1,h=void 0;try{for(var p,y=u[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var d=s(p.value,2),v=d[0],b=d[1];l=l+v+" "+b+" "}}catch(t){f=!0,h=t}finally{try{!c&&y.return&&y.return()}finally{if(f)throw h}}return l}},{key:"k",get:function(){var t=this.getPoints(),e=s(t,2),r=e[0],n=e[1];return(r[1]-n[1])/(r[0]-n[0])}}]),e}(c.default));e.default=h},function(t,e,r){(function(t){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),c=r(3),f=o(c),h=r(11),p=(n(h),r(22)),y=n(p),d=void 0===document.body.ontouchstart,v={down:d?"mousedown":"touchstart",move:d?"mousemove":"touchmove",up:d?"mouseup":"touchend"},b=function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.container,o=void 0===n?document.body:n,s=e.xAxes,u=void 0===s?{domain:[-10,10]}:s,l=e.yAxes,c=void 0===l?{domain:[-5,5]}:l,f=e.content,h=void 0===f?{}:f,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"move";i(this,r);var d=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));d.container=o;var v={top:20,right:40,bottom:20,left:40},b=o.clientWidth-v.left-v.right,m=o.clientHeight-v.top-v.bottom;return d.layout={w:b,h:m,margin:v},d.scaleX=t.scale.linear().domain(u.domain).range([0,b]),d.scaleY=t.scale.linear().domain(c.domain).range([m,0]),d.limitZoom=!1,d.mode=p,d.setMaxListeners(0),d.shapeMap={},d.init(),d.relationManager=new y.relationManager(d),d.shapeManager=new y.shapeManager(d),d.content=d.shapeManager.elements,d.translateContent(h),d}return s(r,e),l(r,[{key:"init",value:function(){var e=this.layout.margin,r=this.layout.w,n=this.layout.h,o=t.select(this.container).append("svg").attr("width",r+e.left+e.right).attr("height",n+e.top+e.bottom),i=o.append("g").attr("class","canvas").attr("transform","translate("+e.left+","+e.top+")");i.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",r).attr("height",n),this.svg=o,this.canvas=i,this.buildAxes(),this.buildAuxline(),this.graph=i.append("g").attr("class","graph").attr("clip-path","url(#clip)"),this.bindEvent()}},{key:"translateContent",value:function(t){var e=this;Object.keys(t).forEach(function(r,n){t[r].forEach(function(t){e._add(r,t)})}),window.c=this.content}},{key:"buildAxes",value:function(){var e=this.scaleX,r=this.scaleY;this.axesX=this.canvas.append("g").attr("class","x-axes axes").attr("transform","translate(0,"+this.layout.h+")").call(t.svg.axis().scale(e).orient("bottom")),this.axesY=this.canvas.append("g").attr("class","y-axes axes").call(t.svg.axis().scale(r).orient("left"))}},{key:"buildAuxline",value:function(){var t=this.scaleX.ticks(),e=this.scaleY.ticks();this.auxLines||(this.auxLines=this.canvas.append("g").attr("class","aux-line"));var r=this,n=this.auxLines.selectAll(".aux-line-x").data(t);n.enter().append("line").attr("class","aux-line-x"),n.exit().remove();var o=this.auxLines.selectAll(".aux-line-y").data(e);o.enter().append("line").attr("class","aux-line-y"),o.exit().remove(),this.auxLines.selectAll(".aux-line-x").attr("x1",function(t,e){return r.scaleX(t)}).attr("x2",function(t,e){return r.scaleX(t)}).attr("y1",r.layout.h).attr("y2",0).attr("value",function(t){return t}),this.auxLines.selectAll(".aux-line-y").attr("y1",function(t,e){return r.scaleY(t)}).attr("y2",function(t,e){return r.scaleY(t)}).attr("x1",r.layout.w).attr("x2",0).attr("value",function(t){return t})}},{key:"reBuildAxes",value:function(){this.axesX.call(t.svg.axis().scale(this.scaleX).orient("bottom")),this.axesY.call(t.svg.axis().scale(this.scaleY).orient("left"))}},{key:"bindEvent",value:function(){var e=this,r=this.zoom=t.behavior.zoom();this.zoom=r;var n=this;t.scale.linear();r.x(this.scaleX).y(this.scaleY).on("zoom",function(){"move"!=n.mode||(n.reBuildAxes(),n.draw(),n.buildAuxline())}),this.rect=this.graph.append("rect").attr("x",0).attr("y",0).attr("width",this.layout.w).attr("height",this.layout.h).attr("fill","none").attr("style","pointer-events: all;").call(r);var o=!0,i=!1,a=void 0;try{for(var s,l=function(){var r=s.value;t.select(e.container).on(v[r],function(){var e={emit:!0};n.emit("_"+v[r],e),0!=e.emit&&(t.event.preventDefault(),n.emit(v[r],t.event,n.getMouse()))})},c=Object.keys(v)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)l()}catch(t){i=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}this.on("_"+v.down,function(t){if(this.lastTarget=this.focusTarget,this.focusTarget=this.activeTarget,this.dragStart=!1,this.dragStartPoint=this.getMouse(),this.mode.indexOf("relation")<0&&this.lastTarget&&this.lastTarget.blur(),"move"==this.mode&&this.focusTarget&&(this.setMode("_move"),this.dragStart=!0),this.focusTarget)t.emit=!1,this.emit("choose",this.focusTarget);else{var e=this.getMouse(),r=u(e,2),n=r[0],o=r[1];this.emit("clickBlank",[this.scaleX.invert(n),this.scaleY.invert(o)])}}),this.on("_"+v.move,function(t){if(!this.dragStart){var e=this.getSelect(this.getMouse());this.mode.indexOf("relation")>-1||this.mode.indexOf("addElement")>-1?!e&&this.activeTarget?(this.emit("hoverout",this.activeTarget),this.activeTarget=null):e&&e!=this.activeTarget?(this.activeTarget&&this.emit("hoverout",this.activeTarget),this.emit("hover",e),this.activeTarget=e):(this.activeTarget=e,e&&this.emit("hover",e)):(e&&e!==this.activeTarget&&(this.activeTarget&&this.activeTarget.blur(),e.focus(),this.activeTarget=e),!e&&this.activeTarget&&(this.activeTarget.blur(),this.activeTarget=null))}this.focusTarget&&"_move"==this.mode&&(this.focusTarget.focus(),this.dragStart&&this.emit("dragtarget",this.focusTarget))}),this.on("_"+v.up,function(t){this.dragStart&&this.emit("dragtargetend",this.focusTarget),this.dragStart=!1,"_move"==this.mode&&this.setMode("move")}),this.on("dragtarget",function(t){var e=this.getMouse(),r=u(this.dragStartPoint,2),n=r[0],o=r[1];t.move([e[0]-n,e[1]-o])}),this.on("dragtargetend",function(t){t&&t.moveEnd()})}},{key:"getSelect",value:function(t){var e=u(t,2),r=e[0],n=e[1],o=!0,i=!1,a=void 0;try{for(var s,l=Object.keys(this.content)[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value,f=!0,h=!1,p=void 0;try{for(var y,d=this.content[c][Symbol.iterator]();!(f=(y=d.next()).done);f=!0){var v=y.value;if(v.isContact([r,n]))return v}}catch(t){h=!0,p=t}finally{try{!f&&d.return&&d.return()}finally{if(h)throw p}}}}catch(t){i=!0,a=t}finally{try{!o&&l.return&&l.return()}finally{if(i)throw a}}return null}},{key:"draw",value:function(){this.emit("draw")}},{key:"setMode",value:function(e){var r=this.mode;"move"==e?this.zoom.x(this.scaleX).y(this.scaleY):this.zoom.x(t.scale.linear()).y(t.scale.linear()),this.mode=e,"_move"!=e&&this.blurAll(),"_move"==r&&"move"==e||"move"==r&&"_move"==e||this.emit("modechange",e)}},{key:"add",value:function(t,e){if("add"==this.mode){var r=this._add(t,e);return this.lastTarget&&this.lastTarget.blur(),this.activeTarget=this.focusTarget=r,r.focus(),r}}},{key:"_add",value:function(t,e){this.content[t]||(this.content[t]=[]);var r=this.shapeManager.addByConfig(t,e);return console.log(this.content),this.shapeMap[r.id]=r,r}},{key:"getMouse",value:function(){return t.mouse(this.graph[0][0])}},{key:"blurAll",value:function(){var t=this;Object.keys(this.content).forEach(function(e){t.content[e].forEach(function(t){t.blur()})}),this.activeTarget=this.focusTarget=this.lastTarget=null}},{key:"removeShape",value:function(t){t.destroy()}},{key:"removeShapeRef",value:function(t){var e,r=t.name;this.content[r]&&(e=this.content[r].indexOf(t)),e>-1&&(this.content[r].splice(e,1),delete this.shapeMap[t.id])}}]),r}(f.default);e.default=b}).call(e,r(4))},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.shapeManager=e.relationManager=void 0;var o=r(23),i=n(o),a=r(24),s=n(a);e.relationManager=i.default,e.shapeManager=s.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(15),f=o(c),h=r(12),p=n(h),y=function(t){function e(t){var r;return i(this,e),a(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),[f])))}return s(e,t),u(e,[{key:"bindEvent",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bindEvent",this).call(this),this.chart.on("modechange",function(e){if(e.indexOf("relation.")<0)t.stopElement();else{var r=e.split(".")[1];t.typeName=r,t.startElement(r)}}),this.chart.on("choose",function(e){t.start&&t.chart.mode.indexOf("relation")>-1&&t.currentElement.addShape(e)})}}]),e}(p.default);e.default=y},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),l=function t(e,r,n){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=r(11),f=o(c),h=r(12),p=n(h),y=function(t){function e(t){var r;i(this,e);var n=a(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(Array.prototype.slice.call(arguments),[f])));return n.processPoints=[],n}return s(e,t),u(e,[{key:"bindEvent",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bindEvent",this).call(this),this.chart.on("modechange",function(e){if(t.stopElement(),e.indexOf("addElement.")>-1){var r=e.split(".")[1];t.typeName=r,t.startElement(r)}}),this.chart.on("clickBlank",function(e){if(t.start&&t.chart.mode.indexOf("addElement")>-1){var r=t.addByConfig("point",{data:e});t.processPoints.push(r),t.currentElement.addShape(r)}}),this.chart.on("choose",function(e){t.start&&t.chart.mode.indexOf("addElement")>-1&&t.currentElement.addShape(e)})}},{key:"addByConfig",value:function(t,e){var r=new this.types[t](this,e,!0);return this.addElement(r),r}},{key:"stopElement",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"stopElement",this).call(this),this.processPoints.forEach(function(t){t.destroy()}),this.processPoints=[]}},{key:"endCurrentElement",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"endCurrentElement",this).call(this),this.processPoints=[]}}]),e}(p.default);e.default=y}]);
//# sourceMappingURL=app.js.map